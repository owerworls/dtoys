function getURLVar(b){var e=[];var d=String(document.location).split("?");if(d[1]){var a=d[1].split("&");for(i=0;i<a.length;i++){var c=a[i].split("=");if(c[0]&&c[1]){e[c[0]]=c[1]}}if(e[b]){return e[b]}else{return""}}}$(document).ready(function(){$(".text-danger").each(function(){var a=$(this).parent().parent();if(a.hasClass("form-group")){a.addClass("has-error")}});$("#form-currency .currency-select").on("click",function(a){a.preventDefault();$("#form-currency input[name='code']").val($(this).attr("name"));$("#form-currency").submit()});$("#form-language .language-select").on("click",function(a){a.preventDefault();$("#form-language input[name='code']").val($(this).attr("name"));$("#form-language").submit()});$("#search input[name='search']").parent().find("button").on("click",function(){var a=$("base").attr("href")+"index.php?route=product/search";var b=$("header input[name='search']").val();if(b){a+="&search="+encodeURIComponent(b)}location=a});$("#search input[name='search']").on("keydown",function(a){if(a.keyCode==13){$("header input[name='search']").parent().find("button").trigger("click")}});$("#menu .dropdown-menu").each(function(){var b=$("#menu").offset();var c=$(this).parent().offset();var a=(c.left+$(this).outerWidth())-(b.left+$("#menu").outerWidth());if(a>0){$(this).css("margin-left","-"+(a+10)+"px")}});$("#list-view").click(function(){$("#content .product-grid > .clearfix").remove();$("#content .row > .product-grid").attr("class","product-layout product-list col-xs-12");$("#grid-view").removeClass("active");$("#list-view").addClass("active");localStorage.setItem("display","list")});$("#grid-view").click(function(){var a=$("#column-right, #column-left").length;if(a==2){$("#content .product-list").attr("class","product-layout product-grid col-lg-6 col-md-6 col-sm-12 col-xs-12")}else{if(a==1){$("#content .product-list").attr("class","product-layout product-grid col-lg-4 col-md-4 col-sm-6 col-xs-12")}else{$("#content .product-list").attr("class","product-layout product-grid col-lg-3 col-md-3 col-sm-6 col-xs-12")}}$("#list-view").removeClass("active");$("#grid-view").addClass("active");localStorage.setItem("display","grid")});if(localStorage.getItem("display")=="list"){$("#list-view").trigger("click");$("#list-view").addClass("active")}else{$("#grid-view").trigger("click");$("#grid-view").addClass("active")}$(document).on("keydown","#collapse-checkout-option input[name='email'], #collapse-checkout-option input[name='password']",function(a){if(a.keyCode==13){$("#collapse-checkout-option #button-login").trigger("click")}});$("[data-toggle='tooltip']").tooltip({container:"body"});$(document).ajaxStop(function(){$("[data-toggle='tooltip']").tooltip({container:"body"})})});var cart={add:function(a,b){$.ajax({url:"index.php?route=checkout/cart/add",type:"post",data:"product_id="+a+"&quantity="+(typeof(b)!="undefined"?b:1),dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(c){$(".alert-dismissible, .text-danger").remove();if(c.redirect){location=c.redirect}if(c.success){$(".header-content-title").after('<div class="container-home"><div class="alert alert-success"><i class="fa fa-check-circle"></i> '+c.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div></div>');setTimeout(function(){$("#cart > button").html('<i class="fa fa-shopping-cart"></i> <span id="cart-total"> '+c.total+"</span>")},100);$("html, body").animate({scrollTop:0},"slow");$("#cart > ul").load("index.php?route=common/cart/info ul li")}},error:function(e,c,d){alert(d+"\r\n"+e.statusText+"\r\n"+e.responseText)}})},update:function(a,b){$.ajax({url:"index.php?route=checkout/cart/edit",type:"post",data:"key="+a+"&quantity="+(typeof(b)!="undefined"?b:1),dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(c){setTimeout(function(){$("#cart > button").html('<i class="fa fa-shopping-cart"></i><span id="cart-total"> '+c.total+"</span>")},100);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart > ul").load("index.php?route=common/cart/info ul li")}},error:function(e,c,d){alert(d+"\r\n"+e.statusText+"\r\n"+e.responseText)}})},remove:function(a){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+a,dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(b){setTimeout(function(){$("#cart > button").html('<i class="fa fa-shopping-cart"></i><span id="cart-total"> '+b.total+"</span>")},100);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart > ul").load("index.php?route=common/cart/info ul li")}},error:function(d,b,c){alert(c+"\r\n"+d.statusText+"\r\n"+d.responseText)}})}};var voucher={add:function(){},remove:function(a){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+a,dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(b){setTimeout(function(){$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+b.total+"</span>")},100);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart > ul").load("index.php?route=common/cart/info ul li")}},error:function(d,b,c){alert(c+"\r\n"+d.statusText+"\r\n"+d.responseText)}})}};var wishlist={add:function(a){$.ajax({url:"index.php?route=account/wishlist/add",type:"post",data:"product_id="+a,dataType:"json",success:function(b){$(".alert-dismissible").remove();if(b.redirect){location=b.redirect}if(b.success){$(".header-content-title").after('<div class="container-home"><div class="alert alert-success"><i class="fa fa-check-circle"></i> '+b.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div></div>')}$("#wishlist-total span").html(b.total);$("#wishlist-total").attr("title",b.total);$("html, body").animate({scrollTop:0},"slow")},error:function(d,b,c){alert(c+"\r\n"+d.statusText+"\r\n"+d.responseText)}})},remove:function(){}};var compare={add:function(a){$.ajax({url:"index.php?route=product/compare/add",type:"post",data:"product_id="+a,dataType:"json",success:function(b){$(".alert-dismissible").remove();if(b.success){$(".header-content-title").after('<div class="container-home"><div class="alert alert-success"><i class="fa fa-check-circle"></i> '+b.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div></div>');$("#compare-total").html(b.total);$("html, body").animate({scrollTop:0},"slow")}},error:function(d,b,c){alert(c+"\r\n"+d.statusText+"\r\n"+d.responseText)}})},remove:function(){}};$(document).delegate(".agree","click",function(b){b.preventDefault();$("#modal-agree").remove();var a=this;$.ajax({url:$(a).attr("href"),type:"get",dataType:"html",success:function(c){html='<div id="modal-agree" class="modal">';html+='  <div class="modal-dialog">';html+='    <div class="modal-content">';html+='      <div class="modal-header">';html+='        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>';html+='        <h4 class="modal-title">'+$(a).text()+"</h4>";html+="      </div>";html+='      <div class="modal-body">'+c+"</div>";html+="    </div>";html+="  </div>";html+="</div>";$("body").append(html);$("#modal-agree").modal("show")}})});(function(a){a.fn.autocomplete=function(b){return this.each(function(){this.timer=null;this.items=new Array();a.extend(this,b);a(this).attr("autocomplete","off");a(this).on("focus",function(){this.request()});a(this).on("blur",function(){setTimeout(function(c){c.hide()},200,this)});a(this).on("keydown",function(c){switch(c.keyCode){case 27:this.hide();break;default:this.request();break}});this.click=function(c){c.preventDefault();value=a(c.target).parent().attr("data-value");if(value&&this.items[value]){this.select(this.items[value])}};this.show=function(){var c=a(this).position();a(this).siblings("ul.dropdown-menu").css({top:c.top+a(this).outerHeight(),left:c.left});a(this).siblings("ul.dropdown-menu").show()};this.hide=function(){a(this).siblings("ul.dropdown-menu").hide()};this.request=function(){clearTimeout(this.timer);this.timer=setTimeout(function(c){c.source(a(c).val(),a.proxy(c.response,c))},200,this)};this.response=function(c){html="";if(c.length){for(i=0;i<c.length;i++){this.items[c[i]["value"]]=c[i]}for(i=0;i<c.length;i++){if(!c[i]["category"]){html+='<li data-value="'+c[i]["value"]+'"><a href="#">'+c[i]["label"]+"</a></li>"}}var d=new Array();for(i=0;i<c.length;i++){if(c[i]["category"]){if(!d[c[i]["category"]]){d[c[i]["category"]]=new Array();d[c[i]["category"]]["name"]=c[i]["category"];d[c[i]["category"]]["item"]=new Array()}d[c[i]["category"]]["item"].push(c[i])}}for(i in d){html+='<li class="dropdown-header">'+d[i]["name"]+"</li>";for(j=0;j<d[i]["item"].length;j++){html+='<li data-value="'+d[i]["item"][j]["value"]+'"><a href="#">&nbsp;&nbsp;&nbsp;'+d[i]["item"][j]["label"]+"</a></li>"}}}if(html){this.show()}else{this.hide()}a(this).siblings("ul.dropdown-menu").html(html)};a(this).after('<ul class="dropdown-menu"></ul>');a(this).siblings("ul.dropdown-menu").delegate("a","click",a.proxy(this.click,this))})}})(window.jQuery);$(document).on("click",'a[href="#"]',function(a){a.stopPropagation();a.preventDefault()});